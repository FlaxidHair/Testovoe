(function(){var e={5281:function(){},4:function(e,t,s){"use strict";var r=s(5471),a=s(2915),o=s(5840),n=s(8232),i=s(6684),l=s(9555),u=s(2982),c=s(5),d=function(){var e=this,t=e._self._c;return t("div",{staticClass:"no-outline",attrs:{tabindex:"0"},on:{mousemove:e.resetTimer,click:e.resetTimer,keydown:e.resetTimer,scroll:e.resetTimer}},[t(a.A,[e.$store.state.errorState?e._e():t(o.A,{attrs:{app:"",color:"primary",dark:""}},[t(n.A,{staticClass:"ml-1",attrs:{icon:"",large:""},on:{click:e.openModal}},[t(i.A,{attrs:{size:45,color:"secondary"}},[e._v("mdi-menu")])],1),t(c.A),t(u.A,{attrs:{"close-on-content-click":!1,"nudge-width":450,"offset-y":""},scopedSlots:e._u([{key:"activator",fn:function({on:s}){return[t(n.A,e._g({staticClass:"secondary mr-3 pa-4",attrs:{icon:"",small:""},on:{click:function(t){return e.$store.commit("newUser")}}},s),[t(i.A,{attrs:{color:"primary"}},[e._v("mdi-magnify")])],1)]}}],null,!1,2317507545)},[t("UserInputForm")],1)],1),t(l.A,[t("div",{staticClass:"d-flex"},[t("transition",{attrs:{name:"fade"}},[!e.$store.state.errorState&&e.openAsideModal?t("AsideModal"):e._e()],1),t("router-view",{staticClass:"mr-10",class:{"ml-auto":!e.openAsideModal}})],1)])],1)],1)},m=[],h=(s(4114),s(8047)),f=s(793),p=s(8748),v=s(6701),A=s(4026),$=s(8017),g=s(8936),x=s(5475),b=s(1022),y=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t(b.A,{staticClass:"mr-2 mt-3",attrs:{stateless:"",value:"true",height:"91vh",width:"15vw"}},[t(h.A,{attrs:{elevation:"2",rounded:"",height:"91vh"}},[t(f.A,[t(p.A,{attrs:{"d-flex":""}},[t(v.A,{attrs:{value:"true",color:"black"},scopedSlots:e._u([{key:"activator",fn:function(){return[t("span",{staticClass:"mr-auto"},[e._v("Профили")])]},proxy:!0}])},[t(h.A,{staticClass:"mx-auto",attrs:{"max-width":"300",tile:"",elevation:0}},[t(p.A,{attrs:{dense:"",rounded:"",height:"70vh"}},[t(g.A,{attrs:{color:"primary"}},[t("router-link",{staticStyle:{"text-decoration":"none"},attrs:{to:"/"}},[t(A.A,[t(x.A,[t(i.A,{attrs:{color:"primary"},domProps:{textContent:e._s("mdi-check-circle")}})],1),t($.pr,[t($.UZ,{domProps:{textContent:e._s("Все")}})],1)],1)],1),t("router-link",{staticStyle:{"text-decoration":"none"},attrs:{to:"/statusTrue"}},[t(A.A,[t(x.A,[t(i.A,{attrs:{color:"primary"},domProps:{textContent:e._s("mdi-check-circle")}})],1),t($.pr,[t($.UZ,{domProps:{textContent:e._s("Обработанные")}})],1)],1)],1),t("router-link",{staticStyle:{"text-decoration":"none"},attrs:{to:"/statusFalse"}},[t(A.A,[t(x.A,[t(i.A,{attrs:{color:"primary"},domProps:{textContent:e._s("mdi-alert-circle")}})],1),t($.pr,[t($.UZ,{domProps:{textContent:e._s("Не обработанные")}})],1)],1)],1)],1)],1)],1)],1)],1)],1)],1)],1)],1)},k=[],U={props:{openAsideModal:Boolean}},_=U,S=s(1656),w=(0,S.A)(_,y,k,!1,null,null,null),T=w.exports,C=s(1253),R=s(877),E=s(1806),P=s(4636),F=function(){var e=this,t=e._self._c;return e.$store.state.user[0]?t(h.A,{staticClass:"absolute pa-7 d-flex flex-column",attrs:{height:this.$store.state.isEdit?625:"90vh"}},[t(R.A,{ref:"form",staticClass:"d-flex flex-column flex-grow-1",attrs:{height:"100%"},on:{submit:function(t){return t.preventDefault(),e.searchOrSubmit(e.$store.state.user[0])}},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[t("div",[t(P.A,{attrs:{solo:"",placeholder:"Имя",dense:"",rules:e.nameRulesDefault,label:"Имя"},model:{value:e.$store.state.user[0].firstName,callback:function(t){e.$set(e.$store.state.user[0],"firstName",t)},expression:"$store.state.user[0].firstName"}}),t(P.A,{attrs:{solo:"",placeholder:"Фамилия",dense:"",rules:e.nameRulesDefault,label:"Фамилия"},model:{value:e.$store.state.user[0].lastName,callback:function(t){e.$set(e.$store.state.user[0],"lastName",t)},expression:"$store.state.user[0].lastName"}}),t(P.A,{attrs:{solo:"",placeholder:"Компания",dense:"",label:"Компания"},model:{value:e.$store.state.user[0].company,callback:function(t){e.$set(e.$store.state.user[0],"company",t)},expression:"$store.state.user[0].company"}}),t(P.A,{attrs:{solo:"",placeholder:"Должность",dense:"",label:"Должность"},model:{value:e.$store.state.user[0].jobTitle,callback:function(t){e.$set(e.$store.state.user[0],"jobTitle",t)},expression:"$store.state.user[0].jobTitle"}}),t(P.A,{attrs:{solo:"",placeholder:"Телефон",dense:"",rules:e.nameRulesPhone,label:"Телефон"},model:{value:e.$store.state.user[0].phone,callback:function(t){e.$set(e.$store.state.user[0],"phone",t)},expression:"$store.state.user[0].phone"}}),t(P.A,{attrs:{solo:"",placeholder:"E-mail",dense:"",rules:e.nameRulesEmail,label:"E-mail"},model:{value:e.$store.state.user[0].email,callback:function(t){e.$set(e.$store.state.user[0],"email",t)},expression:"$store.state.user[0].email"}}),t(P.A,{attrs:{solo:"",placeholder:"Интересы",dense:"",label:"Интересы"},model:{value:e.$store.state.user[0].interests,callback:function(t){e.$set(e.$store.state.user[0],"interests",t)},expression:"$store.state.user[0].interests"}}),e.$store.state.isEdit?t(E.A,{attrs:{solo:"",rules:e.nameSelectRules,items:e.statuses,label:"Обработанный/Не обработанный"},model:{value:e.$store.state.user[0].status,callback:function(t){e.$set(e.$store.state.user[0],"status",t)},expression:"$store.state.user[0].status"}}):e._e()],1),t("small",{directives:[{name:"show",rawName:"v-show",value:e.error,expression:"error"}]},[e._v("Необходимо заполнить хотя бы 1 поле!")]),t(C.SL,{staticClass:"d-flex align-end mt-auto"},[t(c.A),t(n.A,{directives:[{name:"show",rawName:"v-show",value:!this.$store.state.isEdit,expression:"!this.$store.state.isEdit"}],on:{click:e.resetInput}},[e._v("Очистить")]),t(n.A,{attrs:{color:"primary",type:"submit"}},[e._v(e._s(e.messageAction))])],1)],1)],1):e._e()},j=[],O=s(4335);const M=O.A.create({baseURL:"https://retoolapi.dev/wHFLgA/data",headers:{"Content-Type":"application/json"}});var N={getUsers(){return M.get("/")},getUsersActive(){return M.get("?status=true")},getUsersInActiveList(){return M.get("?status=false")},getSearchUser(e){return M.get("/",{params:e})},createUser(e){return M.post("/",e)},updateUser(e,t){return M.put(`/${e}`,t)},deleteUser(e){return M.delete(`/${e}`)}},D={props:{saveUser:Function,nameRulesEmail:Array,nameRulesPhone:Array,nameRulesDefault:Array,nameSelectRules:Array},data(){return{statuses:[{text:"True",value:!0},{text:"False",value:!1}],valid:!1,result:[],error:!1}},methods:{resetInput(){this.$store.state.isSearch=0,this.$refs.form.reset(),this.getUsers()},searchUser(){Object.values(this.$store.state.user[0]).some((e=>""!==e))?(this.error=!1,this.getUsers()):this.error=!0},getUsers(){const e=Object.fromEntries(Object.entries(this.$store.state.user[0]).filter((([e,t])=>""!==t)));N.getSearchUser(e).then((e=>{e.data&&(this.$store.state.results=e.data),this.$store.state.isSearch++}))},searchOrSubmit(e){this.$store.state.isEdit?this.saveUser(e):this.searchUser()}},computed:{messageAction(){return this.$store.state.isEdit?"Сохранить":"Применить"}},updated(){this.$emit("send-ref",this.$refs.form)}},I=D,L=(0,S.A)(I,F,j,!1,null,null,null),B=L.exports,Z={name:"App",components:{AsideModal:T,UserInputForm:B},data(){return{openAsideModal:!0,timeout:null}},methods:{resetTimer(){clearTimeout(this.timeout),this.timeout=setTimeout((()=>{this.$store.commit("deleteCookie"),"/unknownPage"!==this.$route.path&&(this.$router.push("/unknownPage"),this.$store.state.errorState=!0)}),1e4)},openModal(){this.openAsideModal=!this.openAsideModal}},mounted(){this.$store.commit("generateToken"),this.resetTimer(),window.addEventListener("keydown",this.resetTimer)},beforeDestroy(){clearTimeout(this.timer)}},z=Z,H=(0,S.A)(z,d,m,!1,null,null,null),q=H.exports,G=s(173),J=s(2872),K=s(8166),Q=function(){var e=this,t=e._self._c;return t("div",[t(J.A,{attrs:{"max-width":"600px"},model:{value:e.$store.state.isEdit,callback:function(t){e.$set(e.$store.state,"isEdit",t)},expression:"$store.state.isEdit"}},[t("UserInputForm",{attrs:{saveUser:e.saveUser,nameRulesEmail:e.nameRulesEmail,nameRulesPhone:e.nameRulesPhone,nameRulesDefault:e.nameRulesDefault,nameSelectRules:e.nameSelectRules},on:{"send-ref":e.receiveRef,fetchUsers:e.fetchUsers}})],1),t(f.A,[t("UserTableList",{attrs:{loading:e.loading,users:e.users,pageText:e.pageText,selectedActions:e.selectedActions,selectedActionsReset:e.selectedActionsReset},on:{fetchUsers:e.fetchUsers,deleteUser:e.deleteUser,selectUser:e.selectUser}}),t(K.A,{attrs:{color:"primary"},scopedSlots:e._u([{key:"action",fn:function({attrs:s}){return[t(n.A,e._b({attrs:{color:"secondary",text:""},on:{click:function(t){e.snackbar=!1}}},"v-btn",s,!1),[e._v(" Закрыть ")])]}}]),model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v(" "+e._s(e.snackbarText)+" ")])],1)],1)},V=[],W=s(1231),X=s(6263),Y=s(8192),ee=s(2369),te=s(6702),se=function(){var e=this,t=e._self._c;return t(Y.A,{attrs:{width:"80vw"}},[t(f.A,[t(h.A,{staticClass:"pa-5"},[t(f.A,{attrs:{"d-flex":"","justify-space-between":""}},[t(te.sw,[e._v(e._s(e.pageText)),t(n.A,{attrs:{icon:""},on:{click:e.fetchUsers}},[t(i.A,{attrs:{color:"primary"}},[e._v("mdi-refresh")])],1)],1),t(ee.A,{attrs:{justify:"end"}},[t(W.A,{staticClass:"d-flex",attrs:{sm:"2"}},[t(E.A,{staticClass:"secondary",attrs:{filled:"",label:"Действия",dark:"",items:e.itemsSelect,"hide-details":"",color:"secondary","background-color":"primary",value:e.selectedActions},on:{input:e.actionsChange,click:e.selectedActionsReset},scopedSlots:e._u([{key:"item",fn:function({item:s}){return[t("div",[e._v(e._s(s))])]}}])})],1)],1)],1),t(X.A,{attrs:{headers:e.headers,items:e.users,"loading-text":"Загрузка...",loading:e.loading,"no-data-text":"Нет результатов","no-result-text":"Нет результатов",value:e.$store.state.user,height:"66vh"},on:{"update:options":e.fetchUsers,"click:row":function(t){return e.selectUser(t)}},scopedSlots:e._u([{key:"item.status",fn:function({item:s}){return[1==s.status?t("div",[t(i.A,{attrs:{color:"blue"}},[e._v("mdi-cloud-check")])],1):e._e(),0==s.status?t("div",[t(i.A,{attrs:{color:"red"}},[e._v("mdi-cloud-off-outline")])],1):e._e()]}}],null,!0)})],1)],1)],1)},re=[],ae={props:{users:Array,loading:Boolean,pageText:String,selectedActions:String,selectedActionsReset:Function},data(){return{headers:[{text:"Статус",value:"status"},{text:"Имя",value:"firstName"},{text:"Фамилия",value:"lastName"},{text:"Компания",value:"company"},{text:"Должность",value:"jobTitle"},{text:"Телефон",value:"phone"},{text:"Email",value:"email"},{text:"Интересы",value:"interests"}],options:{page:1,itemsPerPage:10},itemsSelect:["Изменить","Удалить","Добавить"]}},methods:{fetchUsers(){this.$emit("fetchUsers")},deleteUser(e){this.$emit("deleteUser",e)},selectUser(e){this.$emit("selectUser",e)},actionsChange(e){if(this.$store.state.user.length){if("Удалить"===e)return this.$emit("deleteUser",this.$store.state.user[0]);"Изменить"===e&&this.$store.state.user[0].id&&!this.$store.state.isEdit&&(this.$store.state.isEdit=!0)}"Добавить"===e&&(this.$store.commit("newUser"),this.$store.state.isEdit=!0)}}},oe=ae,ne=(0,S.A)(oe,se,re,!1,null,null,null),ie=ne.exports,le={components:{UserTableList:ie,UserInputForm:B},data(){return{users:[],loading:!1,snackbar:!1,snackbarText:"",pageText:"",selectedActions:"",refForm:null,nameRulesPhone:[e=>!!e||"Телефон обязателен",e=>/^\(\d{3}\) \d{3}-\d{4}$/.test(e)||"Введите номер в формате (555) 123-1234"],nameRulesEmail:[e=>!!e||"Email обязателен",e=>/.+@.+\..+/.test(e)||"Введите корректный Email"],nameRulesDefault:[e=>!!e||"Необходимо заполнить!"],nameSelectRules:[e=>""!==e||"Выберите статус!"]}},methods:{selectUser(e){this.$store.state.user=[e],this.selectedActions=null},fetchUsers(){let e;this.loading=!0,"status-false"===this.$route.name?(e=N.getUsersInActiveList(),this.pageText="Необработанные"):"status-true"===this.$route.name?(e=N.getUsersActive(),this.pageText="Обработанные"):"status-all"===this.$route.name&&(e=N.getUsers(),this.pageText="Все"),e.then((e=>{this.users=e.data})).finally((()=>{this.loading=!1}))},textSnackbar(e){this.snackbar=!0,this.snackbarText=e},selectedActionsReset(){this.selectedActions=""},saveUser(e){this.refForm.validate()&&(e.id?(this.loading=!0,N.updateUser(e.id,e).then((()=>{this.fetchUsers,this.textSnackbar("Вы успешно обновили пользователя")}))):(this.loading=!0,N.createUser(e).then((()=>{this.fetchUsers,this.textSnackbar("Вы успешно создали пользователя")}))),this.selectedActions="",this.loading=!1,this.$store.state.isEdit=!1)},deleteUser(e){N.deleteUser(e.id).then(this.fetchUsers).then((()=>{this.selectedActions="",this.textSnackbar("Вы успешно удалили пользователя!")}))},receiveRef(e){this.refForm=e}},computed:{getStateSearch(){return this.$store.state.isSearch}},watch:{$route(){this.fetchUsers()},getStateSearch(e){e&&(this.users=this.$store.state.results)}}},ue=le,ce=(0,S.A)(ue,Q,V,!1,null,null,null),de=ce.exports,me=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"d-flex align-center flex-column mr-auto ml-auto mt-16"},[t("h1",{staticClass:"mt-16"},[e._v("Вы бездействовали более 10 секунд!")]),t("router-link",{attrs:{to:"/"}},[t(n.A,{staticClass:"mt-5",attrs:{color:"primary"},on:{click:function(t){return e.$store.commit("generateToken")}}},[e._v("Вернуться?")])],1)],1)},he=[],fe=s(5281),pe=s.n(fe),ve=pe(),Ae=(0,S.A)(ve,me,he,!1,null,null,null),$e=Ae.exports;r.Ay.use(G.Ay);const ge=[{path:"/",component:de,name:"status-all"},{path:"/statusTrue",component:de,name:"status-true"},{path:"/statusFalse",component:de,name:"status-false"},{path:"/unknownPage",component:$e,name:"unknownPage"}],xe=new G.Ay({routes:ge});var be=xe,ye=s(5353);r.Ay.use(ye.Ay);var ke=new ye.Ay.Store({state:{isEdit:!1,isSearch:0,results:[],errorState:!1,user:[]},mutations:{newUser(e){e.user=[{firstName:"",lastName:"",company:"",jobTitle:"",phone:"",email:"",interests:"",status:""}]},setCookie(e,{name:t,value:s,day:r}){const a=new Date(Date.now()+864e5*r);document.cookie=`${t}=${encodeURIComponent(s)}; expires=${a.toUTCString()}; path=/`},generateToken(e){const t=Math.random().toString(36).substr(2,9);this.commit("setCookie",{name:"userToken",value:t,days:1}),e.errorState=!1},deleteCookie(){this.commit("setCookie",{name:"userToken",value:"",days:-1})}}}),Ue=s(3668);r.Ay.use(Ue.A);var _e=new Ue.A({theme:{themes:{light:{primary:"#0f4c82",secondary:"#ffffff",accent:"#82B1FF",error:"#df2b2b",info:"#2196F3",success:"#4CAF50",warning:"#FFC107",customColor:"#FF5722"}},customProperties:!0}});r.Ay.config.productionTip=!1,new r.Ay({router:be,store:ke,vuetify:_e,render:e=>e(q)}).$mount("#app")}},t={};function s(r){var a=t[r];if(void 0!==a)return a.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,s),o.exports}s.m=e,function(){var e=[];s.O=function(t,r,a,o){if(!r){var n=1/0;for(c=0;c<e.length;c++){r=e[c][0],a=e[c][1],o=e[c][2];for(var i=!0,l=0;l<r.length;l++)(!1&o||n>=o)&&Object.keys(s.O).every((function(e){return s.O[e](r[l])}))?r.splice(l--,1):(i=!1,o<n&&(n=o));if(i){e.splice(c--,1);var u=a();void 0!==u&&(t=u)}}return t}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[r,a,o]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var r in t)s.o(t,r)&&!s.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};s.O.j=function(t){return 0===e[t]};var t=function(t,r){var a,o,n=r[0],i=r[1],l=r[2],u=0;if(n.some((function(t){return 0!==e[t]}))){for(a in i)s.o(i,a)&&(s.m[a]=i[a]);if(l)var c=l(s)}for(t&&t(r);u<n.length;u++)o=n[u],s.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return s.O(c)},r=self["webpackChunktestovoe2"]=self["webpackChunktestovoe2"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=s.O(void 0,[504],(function(){return s(4)}));r=s.O(r)})();
//# sourceMappingURL=app.ce5ad865.js.map